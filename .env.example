# =============================================================================
# BACKEND ENVIRONMENT CONFIGURATION
# This file is for the Dockerized backend only
# Frontend is deployed separately on Vercel
# 
# ⚠️  SECURITY WARNING: This file contains sensitive credentials.
# DO NOT commit this file to version control.
# In production, use Docker secrets, environment injection, or a secrets manager.
# =============================================================================

# Environment mode
ENVIRONMENT=production
RUST_LOG=info

# =============================================================================
# LIVEKIT CORE (Self-Hosted)
# =============================================================================
LIVEKIT_URL=wss://your-livekit-domain.com
# Twirp/Admin API endpoint used by Rust backend SDK clients.
# For self-hosted Docker on same network, set to internal HTTP address (e.g. http://livekit-server:7880).
LIVEKIT_API_URL=https://your-livekit-domain.com
LIVEKIT_INGRESS_URL=https://your-ingress-domain.com
LIVEKIT_EGRESS_URL=https://your-egress-domain.com
LIVEKIT_SIP_URL=https://your-sip-domain.com
LIVEKIT_API_KEY=your-livekit-api-key
LIVEKIT_API_SECRET=your-livekit-api-secret

# =============================================================================
# BACKEND CONFIGURATION
# =============================================================================
# Database URL - Use environment-specific secrets manager in production
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://username:password@localhost:5432/livekit_admin

AGENT_DEFAULT_DEPLOYMENT=docker

# JWT Secret - Cryptographically secure random string (64+ characters)
# Generate new secret: pwsh -c "-join ((1..64) | ForEach-Object { (33..126) | Get-Random -Count 1 | ForEach-Object { [char]$_ } })"
# Or use: openssl rand -base64 64
JWT_SECRET=replace-with-your-64-character-secret-key-here-minimum-length-required

# =============================================================================
# CORS / SECURITY
# MUST include your frontend URL here
# =============================================================================
ALLOWED_ORIGINS=https://your-frontend-domain.com,https://your-api-domain.com,http://localhost:3000

# =============================================================================
# RATE LIMITING (DISABLED FOR SELF-HOSTED)
# =============================================================================
# Rate limiting is DISABLED for self-hosted deployments to ensure unlimited
# usage for your own infrastructure. This provides zero artificial restrictions.
# 
# Note: For public-facing deployments, consider enabling rate limiting at
# your reverse proxy (nginx, caddy) or API gateway level.
# RATE_LIMIT_PER_SECOND=10
# RATE_LIMIT_BURST=20

# =============================================================================
# SECURITY
# =============================================================================
# Max request size (10MB default)
MAX_REQUEST_SIZE=10485760
# Request timeout in seconds
REQUEST_TIMEOUT_SECONDS=30
# Enable secure cookie flags (set to "true" in HTTPS production)
SECURE_COOKIES=true

# =============================================================================
# MIGRATION RECOVERY (USE WITH CAUTION)
# =============================================================================
# Set to "true" to force reset migration state if you encounter checksum drift.
# This will re-apply all migrations. ONLY use this for development/recovery.
# After deployment succeeds, REMOVE this environment variable!
# FORCE_MIGRATION_RESET=true
