services:
  - type: web
    name: livekit-admin-backend
    runtime: docker
    repo: https://github.com/Divith123/selfhost-livekit
    branch: master
    rootDir: selfhost-livekit-admin-dash
    dockerContext: .
    dockerfilePath: ./Dockerfile
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: LIVEKIT_URL
        sync: false  # Set via Render dashboard: wss://your-livekit-domain.com
      - key: LIVEKIT_API_URL
        sync: false  # Set via Render dashboard: https://your-livekit-domain.com
      - key: LIVEKIT_INGRESS_URL
        sync: false  # Set via Render dashboard: https://your-ingress-domain.com
      - key: LIVEKIT_EGRESS_URL
        sync: false  # Set via Render dashboard: https://your-egress-domain.com
      - key: LIVEKIT_SIP_URL
        sync: false  # Set via Render dashboard: https://your-sip-domain.com
      - key: LIVEKIT_API_KEY
        sync: false
      - key: LIVEKIT_API_SECRET
        sync: false
      - key: AGENT_DEFAULT_DEPLOYMENT
        value: process
      - key: JWT_SECRET
        generateValue: true
      - key: ALLOWED_ORIGINS
        sync: false  # Set via Render dashboard: https://your-frontend-domain.com,https://your-api-domain.com
      - key: MAX_REQUEST_SIZE
        value: "10485760"
      - key: RUST_LOG
        value: info
      # Uncomment the following line to fix migration checksum drift issues
      # After successful deployment, REMOVE this environment variable!
      # - key: FORCE_MIGRATION_RESET
      #   value: "true"
    healthCheckPath: /health
    buildFilter:
      paths:
        - backend/**
    autoDeploy: true
